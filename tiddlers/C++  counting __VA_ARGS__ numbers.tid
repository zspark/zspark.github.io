created: 20200114160824142
creator: Jerry
modified: 20200114161414230
modifier: Jerry
tags: language C++
title: C++  counting __VA_ARGS__ numbers
type: text/vnd.tiddlywiki


!!if you are using old c++ standard (e.g. before c++11), the following codes are useful:

```cpp
#define NUMARGS(...)  (sizeof((int[]){__VA_ARGS__})/sizeof(int))
```

how to use?

```cpp
#include <stdio.h>
#include <string.h>
#include <stdarg.h>

#define NUMARGS(...)  (sizeof((int[]){__VA_ARGS__})/sizeof(int))
#define SUM(...)  (sum(NUMARGS(__VA_ARGS__), __VA_ARGS__))

void sum(int numargs, ...);

int main(int argc, char *argv[]) {

    SUM(1);
    SUM(1, 2);
    SUM(1, 2, 3);
    SUM(1, 2, 3, 4);

    return 1;
}

void sum(int numargs, ...) {
    int     total = 0;
    va_list ap;

    printf("sum() called with %d params:", numargs);
    va_start(ap, numargs);
    while (numargs--)
        total += va_arg(ap, int);
    va_end(ap);

    printf(" %d\n", total);

    return;
}
```

!!if newer c++ standard

```cpp
#include <tuple>

#define MACRO(...) \
    std::cout << "num args: " \
    << std::tuple_size<decltype(std::make_tuple(__VA_ARGS__))>::value \
    << std::endl;
```